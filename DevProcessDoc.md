
# Development Process Documentation: User story, Object Models and Thinking In React  


## Example Requirement breakdown
Originally provided requirement:
```
As a trainee
So that I can see what others are saying  
I want to see all peeps in reverse chronological order
```

Story decomposed to the following:

Presentational layer:
```
As the presentational layer,
I want to be able to request and receive an array of all peeps from server,
so that I can receive content to display.

As the presentational layer,
I want each peep supplied in the array to contain a username, name, peep content and time and date,
so that I have the right information to display

As the presentational layer,
I want to be able to display a message or animation that will let the user the content is loading,
so that users don't get frustrated.

As the presentational layer,
I want to render the peeps in reverse chronological order on receiving them from the server,
so that I am meeting the requirement.

As the presentational layer,
I want to use bootstrap classes and styles,
so that I can look nice and be responsive to different sized devices.
```
Server layer:

```
As the server,
I want to listen to get requests on a "/peeps" route,
so that the presentational layer can request all peeps from me.

As the server,
I want to be able to request all peeps from the data layer,
so that I can pass them back to the presentational layer.

As the server,
I want to pass back usernames, names, peep content and time/date to the presentational layer,
so that the presentational layer has the right information.

```
Data Persistence layer:
```
As the Data Persistence layer,
I want to store peeps in a collection containing all peeps,
So that I know what all peeps are.

As the data persistence layer,
I want peeps documents in the database to contain a unique ID, a user ID, content, and a date and time created,
so that I have the right information to provide when requested.

```

# Object Model for database

|Object         | Properties        |
|---------------|-------------------|
|Peep           |id @String*        |
|               |username @String   |
|               |realName @string   |
|               |content @String    |
|               |created @Date      |
|User           |id @String*        |
|               |name @String       |
|               |username @String   |
|               |email @String      |
|               |password @Sting    |

*unique - generated by Mongo DB.

All properties are *required*.



# Wireframes

Image of wireframe sketches can be found in [./wireframes](./wireframes).

From these the component hierarchy was defined

# Component hierarchy

```
App
    Header
    Main

        < / path>
        AllPeeps
            Peep
        Loading         //Show a loading message and spinner if still waiting for data.
        Error           //show error message if peeps cannot be obtained.
        SignInForm      //if user not signed in and on "/" route
                        //Should contain:
                            //Username text input
                            //Password text input
                            //"Sign in" Submit button
                            //Link to "/signup" route
        PeepForm        //if user signed in and on "/"route
                        //Should contain:
                            //Text input for peep content
                            //"Peep!" submit button to post the content.
                            //"Sign Out" submit button.

        < /signup path>
        SignUpForm       //"/signup" route only. Should contain:
                            //Username text input
                            //Name text input
                            //email text input
                            //Password input
                            //Confirm Password input
                            //Submit button - "Sign me up!"
                            //Link to "/" route
    Footer

```
### Identify state and location it should sit (React)

### App
This should contain the following state:
```
peeps[@peep]  
//Rationale - can make content available to AllPeeps child. Will need to re-render based on inverse data flow from PeepForm component
```
```
user = {
    username,
    name,
    email,
    password
}
// Rationale - changes over time. Needs to understand this in order to render correct components. Wrapped as an object as will be passed to other components.
```

### SignInForm

This should contain the following state:
```
user = {
    username,
    password
}
// Rationale - user generated/changes over time. Wrapped in an object as supplied as one object on form submission to the server.
```
### SignUpForm
This should contain the following state:
```
newUser = {
    username,
    name,
    email,
    password
}
// Rationale - user generated/changes over time. Wrapped in an object as supplied as one object on form submission to the server.
```
## Inverse data flow (React)

### App
Passes the following functions to the following components:

`setUser()` to the `SignInForm` - allows the `SignInForm` component to signal a successful login. The App will re-render after successful login exposing the `PeepForm` component.

`signOut()` to the `PeepForm` component. Allows the user to sign out using the `sign out` button in `PeepForm`.

`getPeeps()` to the `PeepForm` component. Allows the `PeepForm` component to signal a successful posting of a peep to the server/database and the App to obtain the up to date peeps from the server.

